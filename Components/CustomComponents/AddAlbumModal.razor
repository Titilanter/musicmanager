@page "/addalbum"
@using MusicManager.Data.ORM
@using MusicManager.Data
@inject IDatabaseService DatabaseService
@inject IDialogService DialogService

<MudDialog>
    <DialogContent>
        <MudText Typo="Typo.h6" GutterBottom>Ajouter un nouvel album</MudText>
        <MudForm @ref="form">
            <MudTextField @bind-Value="newAlbum.nom" Label="Nom de l'album" Required="true" />
            <MudTextField @bind-Value="newAlbum.artiste" Label="Artiste" Required="true" />
            <MudDatePicker @bind-Value="newAlbum.releaseDate" Label="Date de sortie" />
            <MudDatePicker @bind-Value="newAlbum.deadline" Label="Deadline" />
        </MudForm>
    </DialogContent>
    <DialogActions>
        <MudButton Color="Color.Primary" OnClick="@CloseModal" >Ajouter</MudButton>
        <MudButton Color="Color.Secondary" OnClick="@CloseModal">Annuler</MudButton>
    </DialogActions>
</MudDialog>

@code {
    [CascadingParameter] 
    MudDialogInstance MudDialog { get; set; }

    private Album newAlbum = new Album();
    private MudForm form;

   
    private void CloseModal()
    {
        // Afficher les détails de l'album dans la console
        Console.WriteLine($"Nouvel album : {newAlbum.nom}");
        Console.WriteLine($"Artiste : {newAlbum.artiste}");
        Console.WriteLine($"Date de sortie : {newAlbum.releaseDate?.ToString("dd/MM/yyyy") ?? "Non spécifiée"}");
        Console.WriteLine($"Deadline : {newAlbum.deadline?.ToString("dd/MM/yyyy") ?? "Non spécifiée"}");
        MudDialog.Cancel();
    }
}
