@using MusicManager.Data.ORM
@inject NavigationManager Navigation

<MudPaper Width="95%" Height="70px" Class="d-flex ml-4 pl-4" Outlined="true" @onclick="GoToMusic">
    <MudText Class="align-self-center mr-4">@song.order.</MudText>
    <MudImage Src="@album.coverUri" Style="heigth:60px; width:60px;" Class="m-2"/>
    <MudText Class="align-self-center ml-4 mr-4" Style="Width:15%;">@song.nom</MudText>
    <AudioListener Width="50%"/>
    <MudText Class="align-self-center mr-10">3:12</MudText>
    <MudText Class="align-self-center ml-4" Style="width:10vh;">@featurings</MudText>
    <MudToggleIconButton @bind-Toggled="song.fini"
                        Icon="@Icons.Material.Rounded.Construction"
                        Color="@Color.Warning"
                        ToggledIcon="@Icons.Material.Rounded.Check"
                        ToggledColor="@Color.Success"
                        title="@(song.fini ? "Yes" : "No")" />
    <MudButton Style="width:150px; height:50px;" Variant="Variant.Filled" Class="align-self-center mr-4" @onclick="GoToClip">Clip</MudButton>
    <MudIconButton Icon="@Icons.Material.Rounded.Menu" Class="mr-4" @onclick="DragAndDrop"/>
</MudPaper>


@code{
    [Parameter]
    public Song song {get; set;}

    [Parameter]
    public Album album {get; set;}
    private bool SongFinished {get; set;}
    private string featurings {get; set;} = string.Empty;

    protected override void OnInitialized(){
        base.OnInitialized();
        if(song.featurings!= null){
            featurings="Feat. " + song.featurings;
        }
        
    }

    private void GoToMusic(){
        Navigation.NavigateTo("/song/" + song.idSong);
    }

    private void GoToClip(){
        Console.WriteLine("Clip");
    }

    private void DragAndDrop(){
        Console.WriteLine("DragAndDrop");
    }
}